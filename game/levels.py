from copy import deepcopy

level_menu = {
            0: "LEVEL1",
            1: "LEVEL2",
            2: "LEVEL3",
            3: "LEVEL4",
            4: "LEVEL5",
            5: "LEVEL6",
            6: "LEVEL7",
            7: "LEVEL8",
            8: "LEVEL9"
            }

reverse_level_menu = {value: key for key, value in level_menu.items()}

levels = {
        "LEVEL1": {
            "layout": [[-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1,  0,  0,  0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1,  0,  0,  0,  0,  0, 0,  -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1,  0,  0,  0,  0,  0, 0,  0,  0,  0,  -1, -1, -1, -1],
                       [-1, -1, -1, -1,  0,  0,  0,  0, 0,  0,  0,  0,  0,  -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, 0,  0,  7,  0,  0,  -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, 0,  0,  0,  -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]],
            "start": (4, 4),

            "goal": (7, 10),

            "button": None,
        },

        "LEVEL2": {
            "layout": [[-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1,  3,  3,  3,  3,  3,  3,  3,  3, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1,  3,  3,  3,  3,  3,  3,  3,  3, -1, -1, -1, -1, -1, -1],
                       [-1, -1,  0,  0,  0,  0, -1, -1, -1, -1, -1, -1,  0,  0,  0, -1, -1, -1, -1],
                       [-1, -1,  0,  0,  0, -1, -1, -1, -1, -1, -1, -1, -1,  0,  0, -1, -1, -1, -1],
                       [-1, -1,  0,  0,  0, -1, -1, -1, -1, -1, -1, -1, -1,  0,  0, -1, -1, -1, -1],
                       [-1, -1,  0,  0,  0, -1, -1, -1,  0,  0,  0,  0,  3,  3,  3,  3,  3, -1, -1],
                       [-1, -1,  0,  0,  0, -1, -1, -1,  0,  0,  0,  0,  3,  3,  3,  3,  3, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1,  0,  7,  0, -1, -1,  3,  3,  0,  3, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1,  0,  0,  0, -1, -1,  3,  3,  3,  3, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]],

            "start": (7, 3),

            "goal": (9, 9),

            "button": None,
        },

        "LEVEL3": {
            "layout": [[-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1,  0,  0,  0,  0, -1, -1, -1, -1, -1,],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1,  0,  0,  0,  0, -1, -1, -1, -1, -1,],
                       [-1, -1,  0,  0,  0, -1, -1, -1, -1, -1,  0, -1, -1,  0,  0,  0,  0, -1, -1,],
                       [-1, -1,  0,  0,  0,  0,  0,  0,  0,  0,  0, -1, -1, -1,  0,  7,  0, -1, -1,],
                       [-1, -1,  0,  0,  0, -1, -1, -1, -1,  0,  0,  4, -1, -1,  0,  0,  0, -1, -1,],
                       [-1, -1,  0,  0,  0, -1, -1, -1, -1,  0,  0,  0, -1, -1,  0,  0,  0, -1, -1,],
                       [-1, -1, -1,  0,  0, -2, -1, -1, -1,  0, -1, -1, -1, -1, -1, -1, -1, -1, -1,],
                       [-1, -1, -1, -1,  0,  0,  0,  0,  0,  0, -1, -1, -1, -1, -1, -1, -1, -1, -1,],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,]],

            "start": (5, 3),

            "goal": (5, 15),

            "button": {  # Location, is_active, hidden_path
                    (6, 11): [False, [((8, 5))]]
            },
        },

        "LEVEL4": {
            "layout": [[-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,  0,  0,  0,  0, -1, -1, -1],
                       [-1, -1, -1,  0,  0,  0,  0, -2, -2,  0,  5,  0,  0,  0,  0,  0,  0, -1, -1],
                       [-1, -1, -1,  0,  0,  0,  0, -1, -1, -1, -1, -1, -1, -1,  0,  0,  0, -1, -1],
                       [-1, -1, -1,  0,  0,  0,  0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1,  0,  0,  0,  0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,  0,  0,  0,  0,  5, -1, -1],
                       [-1, -1,  0,  0,  0, -1, -1, -1, -1, -1, -1, -1,  0,  0,  0,  0,  0, -1, -1],
                       [-1, -1,  0,  7,  0,  0,  0, -2, -2,  0,  0,  0,  0,  0,  0, -1, -1, -1, -1],
                       [-1, -1,  0,  0,  0,  0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]],

            "start": (3, 15),

            "goal": (10, 3),

            "button": {  # Location, is_active, hidden_path
                    (3, 10): [True, ((3, 7), (3, 8))],
                    (8, 16): [False, ((10, 7), (10, 8))]
            },
        },

        "LEVEL5": {
            "layout": [[-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1,  0,  0,  0,  0,  0,  0, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1,  0, -1, -1,  0,  0,  0, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1,  0, -1, -1,  0,  0,  0,  0,  0, -1, -1, -1, -1],
                       [-1, -1,  0,  0,  0,  0,  0,  0, -1, -1, -1, -1, -1,  0,  0,  0,  0, -1, -1],
                       [-1, -1, -1, -1, -1, -1,  0,  0,  0, -1, -1, -1, -1,  0,  0,  7,  0, -1, -1],
                       [-1, -1, -1, -1, -1, -1,  0,  0,  0, -1, -1, -1, -1, -1,  0,  0,  0, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1,  0, -1, -1,  0,  0, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1,  0,  0,  0,  0,  0, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1,  0,  0,  0,  0,  0, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1,  0,  0,  0, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]],

            "start": (5, 2),

            "goal": (6, 15),

            "button": None,
        },

        "LEVEL6": {
            "layout": [[-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1,  0,  0,  0, -2, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1,  0,  7,  0, -2, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1,  0,  0,  0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1,  0, -1, -1, -1,  0,  0,  0,  0,  0,  0, -1, -1, -1],
                       [-1, -1, -1,  0, -1, -1, -1,  0,  0, -1, -1,  0,  0, -1, -1, -1],
                       [-1, -1,  0,  0,  0,  0,  0,  0,  0, -1, -1,  0,  0,  0, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1,  0,  6, -1, -1, -1, -1,  0, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1,  0,  0,  0,  0, -1, -1,  0, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1,  0,  0,  0,  0,  0,  0,  0, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1,  0,  0,  0, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]],

            "start": (7, 2),

            "goal": (3, 4),

            "button": {  # Location, is_active, hidden_path
                    (8, 8): [True, ((2, 6), (3, 6))]
            },
        },

        "LEVEL7": {
            "layout": [[-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,  4, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1,  0,  0,  0, -1, -1,  0,  0,  0, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1,  0,  4,  0,  0,  0,  0,  0, -2, -1, -1],
                       [-1, -1, -1, -1, -1,  0,  0,  0,  0,  0, -1, -1,  0,  0, -1, -1, -1],
                       [-1, -1, -1, -1, -1,  0,  7,  0, -2, -1, -1, -1,  0,  0, -1, -1, -1],
                       [-1, -1,  0,  0,  0,  0,  0,  0, -1, -1, -1,  0,  0,  0,  0, -1, -1],
                       [-1, -1,  0,  0,  0,  0, -1, -1, -1, -1, -1,  0,  0,  0,  0, -1, -1],
                       [-1, -1,  0,  0,  0,  0, -1, -1,  0,  0,  0,  0,  0, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1,  0,  0,  0, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1,  0,  0,  0, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]],

            "start": (8, 4),

            "goal":  (6, 6),

            "button": {  # Location, is_active, hidden_path
                    (4, 8): [False, [((4, 14))]],
                    (2, 14): [False, [((6, 8))]],
            },
        },

        "LEVEL8": {
            "layout": [[-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1,  0,  0,  0,  3,  0,  0,  0,  0,  3,  0,  0,  0,  0, -1, -1, -1],
                       [-1, -1,  0,  0, -1, -1, -1, -1, -1, -1, -1, -1,  0,  0,  0, -1, -1, -1],
                       [-1, -1,  0,  0, -1, -1, -1, -1, -1, -1, -1, -1, -1,  0,  0,  0, -1, -1],
                       [-1, -1,  0,  0,  0, -1, -1, -1,  0,  0,  0, -1, -1,  0,  0,  0, -1, -1],
                       [-1, -1,  0,  0,  0,  3,  3,  3,  0,  7,  0, -1, -1,  0,  0,  0, -1, -1],
                       [-1, -1,  0,  0,  0, -1, -1,  3,  0,  0,  0, -1, -1,  0, -1, -1, -1, -1],
                       [-1, -1, -1, -1,  0, -1, -1,  3,  3,  3,  3,  3,  0,  0, -1, -1, -1, -1],
                       [-1, -1, -1, -1,  0,  0,  0,  3,  3,  0,  3,  3,  3, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1,  0,  0,  3,  3,  3,  3,  3,  3, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1,  0,  0,  0, -1, -1,  0,  0, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]],

            "start": (5, 14),

            "goal":  (6, 9),

            "button": None

        },

        "LEVEL9": {
            "layout": [[-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1,  0,  0,  0, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1,  0,  0,  0, -1, -1,  0,  0,  0, -1, -1, -1, -1, -1],
                       [-1, -1,  0, -2, -2,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, -1, -1],
                       [-1, -1,  0, -2, -2,  0,  0,  0, -1, -1, -1, -1, -1, -1,  4,  0, -1, -1],
                       [-1, -1,  0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,  0,  0, -1, -1],
                       [-1, -1,  0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,  0,  0, -1, -1],
                       [-1, -1,  0, -1, -1, -1, -1, -1, -1, -1,  0,  0,  0,  0,  0,  0, -1, -1],
                       [-1, -1,  0,  0,  0,  0,  0, -1, -1, -1,  0,  0,  0, -1, -1, -1, -1, -1],
                       [-1, -1, -1,  0,  0,  7,  0, -1, -1, -1,  0,  0,  0, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1,  0,  0,  0, -1, -1, -1,  0,  0,  0,  0,  0,  4, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                       [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]],

            "start": (4, 6),

            "goal":  (10, 5),

            "button": {  # Location, is_active, hidden_path
                    (5, 14): [False, ((4, 3), (4, 4))],
                    (11, 15): [False, ((5, 3), (5, 4))]
            },

        },

}

NUM_LEVELS = len(levels)


class Levels:
    def __init__(self, chosen_level):
        self.level_name = chosen_level
        self.level_data = levels[self.level_name]

        self.layout = deepcopy(self.level_data["layout"])
        self.start = self.level_data["start"]
        self.goal = self.level_data["goal"]
        self.button = deepcopy(self.level_data["button"])

        self.width = len(self.layout[0])
        self.height = len(self.layout)

    def get_tiletype(self, position):
        x, y = position
        if not (0 <= x <= self.height and 0 <= y <= self.width):
            return "VOID"

        match levels[self.level_name]["layout"][x][y]:
            case -2:
                return "HIDDEN_PATH"
            case -1:
                return "VOID"
            case 0:
                return "FLOOR"
            case 1:
                return "BLOCK_UPRIGHT"
            case 2:
                return "BLOCK_PRONE"
            case 3:
                return "GLASS_FLOOR"
            case 4:
                return "BUTTON_TYPE_X"
            case 5:
                return "BUTTON_TYPE_HEX"
            case 6:
                return "BUTTON_ONE_TIME_USE"
            case 7:
                return "GOAL"

    def is_goal(self, position):
        return position == self.goal

    def switch_level(self):
        level_num = reverse_level_menu[self.level_name]
        self.level_name = level_menu[(level_num + 1) % NUM_LEVELS]
        self.level_data = levels[self.level_name]
        self.layout = deepcopy(self.level_data["layout"])
        self.start = self.level_data["start"]
        self.goal = self.level_data["goal"]

        return self.level_name
